<div class="energies">
    <label>
        <span>Wavelength / Ã…</span>
        <input type="number" step="0.0001" [(ngModel)]="wavelength" (input)="wavelengthInput()">
    </label>
    <label>
        <span>Energy / eV</span>
        <input type="number" [(ngModel)]="energy" (input)="energyInput()">
    </label>
</div>
<table *ngIf="selected.length > 0">
    <thead>
        <tr>
            <th colspan="2">Element</th>
            <th>F'</th>
            <th>F"</th>
            <th></th>
            <th></th>
        </tr>
    </thead>
    <tbody>
        <tr *ngFor="let element of selected">
            <td>{{element.z}}</td>
            <td>{{element.symbol}}</td>
            <td class="number">{{f1(element.z, energy) | number: '1.3-3'}}</td>
            <td class="number">{{f2(element.z, energy) | number: '1.3-3'}}</td>
            <td>
                <div class="color" [style.background-color]="element.color"></div>
            </td>
            <td><span class="material-symbols-outlined" (click)="deselect(element)">close</span></td>
        </tr>
    </tbody>
</table>
<datalist id="elements">
    <option *ngFor="let element of elements" [value]="element.label"></option>
</datalist>
<label class="search" *ngIf="selected.length < 5">
    <span class="material-symbols-outlined">search</span>
    <input list="elements" placeholder="Add element" [(ngModel)]="search" (input)="searchInput()">
</label>
<div class="chart" *ngIf="selected.length > 0">
    <canvas baseChart [type]="'scatter'" [data]="chartData" [options]="chartOptions" [legend]="chartLegend"
        (chartClick)="chartClicked($event)"></canvas>
</div>
<div class="zoom" *ngIf="selected.length > 0">
    <span class="material-symbols-outlined" (click)="update_zoom(zoom / 2)">zoom_in</span>
    <span class="material-symbols-outlined" (click)="update_zoom(zoom * 2)">zoom_out</span>
    <span class="material-symbols-outlined" (click)="update_zoom(8192)">undo</span>
</div>
<p class="description">
    Calculates anomalous scattering factors (f' and f") using the
    <a href="https://doi.org/10.1107/S0567739481000600">Cromer-Liberman</a>
    algorithm with corrections from
    <a href="https://doi.org/10.1107/S0108767389010718">Kissel and Pratt</a>.
    Uses the implementation in
    <a href="https://gemmi.readthedocs.io/en/latest/hkl.html#anomalous">Gemmi</a>
    compiled to WebAssembly using
    <a href="https://emscripten.org">Emscripten</a>.
</p>
